<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library Management System - Fun Page</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <!-- Navigation Bar-->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="assets/img/logo.png" alt="Library Logo" width="50" class="me-2">
        Library Management System
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
          <li class="nav-item"><a class="nav-link" href="forms.html">Forms</a></li>
          <li class="nav-item"><a class="nav-link" href="tables.html">Tables</a></li>
          <li class="nav-item"><a class="nav-link" href="List.html">A-Z List</a></li>
          <li class="nav-item"><a class="nav-link" href="services.html">Services</a></li>
          <li class="nav-item"><a class="nav-link" href="memberShipPolicy.html">Membership & Policies</a></li>
          <li class="nav-item"><a class="nav-link" href="questionnaire.html">Questionnaire</a></li>
          <li class="nav-item"><a class="nav-link" href="calculate.html">Calculator</a></li>
          <li class="nav-item"><a class="nav-link" href="funpage.html">Fun Page</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- Main Page Content -->
  <div class="container my-5">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <h2 class="text-primary text-center mb-3">Library Fun Page</h2>
        <p class="text-center text-muted mb-4">
          Click the words in the correct order to build a meaningful sentence about the library.
        </p>
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 class="mb-0">Word Puzzle Game</h5>
          <button id="newGame" class="btn btn-outline-primary btn-sm">New Game</button>
        </div>
        <!-- Container for the shuffled word buttons -->
        <div id="wordsContainer" class="mb-3 d-flex flex-wrap gap-2"></div>
        <!-- Card that shows the sentence created by the user and feedback message -->
        <div class="card">
          <div class="card-body">
            <h6 class="card-title">Your sentence:</h6>
            <p id="userSentence" class="fw-semibold mb-2"></p>
            <p id="funMessage" class="mb-0"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Footer -->
  <footer class="bg-primary text-white text-center py-3 mt-5">
    <p class="mb-0">&copy; 2025 AGI Team - All Rights Reserved.</p>
  </footer>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Fun Page Script-->
  <script>
    // This is the correct sentence we want the user to build.
    // It is related to the topic of the website (library).
    const correctSentence = "Our library helps students find books easily";
    // We split the sentence string into an array of individual words.
    const correctWords = correctSentence.split(" ");
    // This array will store the words selected by the user in the clicked order.
    let userWords = [];
    /**
     * shuffle(array)
     * -------------
     * This function takes an array and shuffles its elements in place
     * using the Fisher-Yates shuffle algorithm.
     * It is used to randomize the order of the word buttons each time
     * the user starts a new game.
     */
    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        // Swap array[i] with array[j]
        const temp = array[i];
        array[i] = array[j];
        array[j] = temp;
      }
    }
    /**
     * startGame()
     * -----------
     * This function resets the game state and creates a new set of
     * buttons with the shuffled words.
     * It:
     * -Clears the previous user sentence and message.
     * -Clears old buttons from the container.
     * -Creates a new button for each shuffled word.
     */
    function startGame() {
      // Reset the array where we store the user's chosen words.
      userWords = [];
      // Get references to the elements in the page.
      const userSentenceElement = document.getElementById("userSentence");
      const funMessageElement = document.getElementById("funMessage");
      const wordsContainer = document.getElementById("wordsContainer");
      // Clear any previous sentence and feedback message.
      userSentenceElement.textContent = "";
      funMessageElement.textContent = "";
      // Remove previous buttons from the container.
      wordsContainer.innerHTML = "";
      // Create a copy of the correct words array and shuffle it.
      const shuffled = correctWords.slice();
      shuffle(shuffled);
      // For each word in the shuffled array, create a Bootstrap button.
      shuffled.forEach(function(word) {
        const button = document.createElement("button");
        button.className = "btn btn-outline-secondary btn-sm";
        button.textContent = word;
        // When the user clicks a button:
        // -Add this word to the userWords array.
        // -Update the text of the userSentence paragraph.
        // -Disable the button so the same word cannot be used twice.
        // -If the user selected the same number of words as in the
        //    correct sentence, check if the sentence is correct.
        button.addEventListener("click", function() {
          userWords.push(word);
          userSentenceElement.textContent = userWords.join(" ");
          button.disabled = true;
          // When the user has clicked as many words as the length of
          // the original sentence, we compare the result.
          if (userWords.length === correctWords.length) {
            checkSentence();
          }
        });
        // Add the button to the container.
        wordsContainer.appendChild(button);
      });
    }
    /**
     * checkSentence()
     * ---------------
     * This function compares the sentence created by the user with
     * the correct one and shows a message in green if it is correct
     * or red if it is not correct.
     */
    function checkSentence() {
      const userSentence = userWords.join(" ");
      const funMessageElement = document.getElementById("funMessage");
      if (userSentence === correctSentence) {
        funMessageElement.innerHTML =
          '<span class="text-success">Excellent! You built the correct sentence ðŸŽ‰</span>';
      } else {
        funMessageElement.innerHTML =
          '<span class="text-danger">Not correct. Click "New Game" to try again.</span>';
      }
    }
    // When the "New Game" button is clicked, we start a new game.
    document.getElementById("newGame").addEventListener("click", startGame);
    // Automatically start the first game when the page loads.
    startGame();
  </script>
</body>
</html>
